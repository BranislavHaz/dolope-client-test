import { useEffect } from "react";
import Head from "next/head";

import * as $ from "./index.styled";
import useWardrobeStore from "@/stores/wardrobeStore";

import Wardrobe from "@/components/elements/Wardrobe";
import InputSectionModule from "@/components/inputs/InputSectionModule";
import InputSectionsCount from "@/components/inputs/InputSectionsCount";
import InputWardrobeType from "@/components/inputs/InputWardrobeType";
import InputWardrobeSize from "@/components/inputs/InputWardrobeSize";

const Index = () => {
  const { setViewport } = useWardrobeStore((state) => ({
    setViewport: state.setViewport,
  }));

  useEffect(() => {
    setViewport(
      {
        width: window.innerWidth,
        height: window.innerHeight,
      },
      [setViewport]
    );

    const handleResize = () => {
      setViewport({
        width: window.innerWidth,
        height: window.innerHeight,
      });
    };

    window.addEventListener("resize", handleResize);

    return () => {
      window.removeEventListener("resize", handleResize);
    };
  }, []);

  return (
    <>
      <Head>
        <title>Nakonfigurujte si vlastnu skri≈àu</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <>
        <$.Main>
          <Wardrobe />
        </$.Main>
      </>
      <InputWardrobeType />
      <InputWardrobeSize />
      <$.Inputs>
        <InputSectionModule id={1} />
        <InputSectionModule id={2} />
        <InputSectionModule id={3} />
      </$.Inputs>
      <InputSectionsCount />
    </>
  );
};

export default Index;
